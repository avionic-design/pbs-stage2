From eafe1d33cbde01e436c0b21eca5b52b8e13705e3 Mon Sep 17 00:00:00 2001
From: Bert van Hall <bert.vanhall@avionic-design.de>
Date: Tue, 30 Aug 2016 12:31:47 +0200
Subject: [PATCH 1/2] net snmp pkgconfig

Use pkgconfig to check for net-snmp.

Signed-off-by: Alban Bedel <alban.bedel@avionic-design.de>
Signed-off-by: Bert van Hall <bert.vanhall@avionic-design.de>
---
 configure.ac | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/configure.ac b/configure.ac
index dd723b0..089ac8a 100644
--- a/configure.ac
+++ b/configure.ac
@@ -253,7 +253,13 @@ AC_ARG_WITH([snmp],
     [Enable the use of SNMP @<:@default=no@:>@]),
   [],
   [with_snmp=no])
-lldp_CHECK_SNMP
+if test x"$with_snmp" = x"yes"; then
+  PKG_CHECK_MODULES([NETSNMP], [net-snmp-agent],
+    [AC_DEFINE_UNQUOTED([USE_SNMP], 1) NETSNMP_LIBS="${NETSNMP_LIBS} -lnetsnmpmibs"],
+    [lldp_CHECK_SNMP])
+else
+  lldp_CHECK_SNMP
+fi
 
 # XML
 AC_ARG_WITH([xml],
-- 
2.1.0

