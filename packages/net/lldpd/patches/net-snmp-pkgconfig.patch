diff --git a/configure.ac b/configure.ac
index 9692b8b..aae12e9 100644
--- a/configure.ac
+++ b/configure.ac
@@ -197,7 +197,7 @@ AC_ARG_WITH([snmp],
     [Enable the use of SNMP @<:@default=no@:>@]
   ))
 if test x"$with_snmp" = x"yes"; then
-   lldp_CHECK_SNMP
+   PKG_CHECK_MODULES([NETSNMP], [net-snmp-agent], [], [lldp_CHECK_SNMP])
 fi
 
 AC_ARG_WITH([xml],
