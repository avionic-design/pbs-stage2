Autoreconfigure.

From: Thierry Reding <thierry.reding@avionic-design.de>


---
 Makefile.in |  294 ++++++++++++++++++++++++++++++-----------------------------
 configure   |  201 +++++++++++++++++++++++-----------------
 2 files changed, 262 insertions(+), 233 deletions(-)

diff --git a/Makefile.in b/Makefile.in
index 7344aad..0fea563 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -57,11 +57,24 @@ libexec_PROGRAMS = extras/firmware/firmware$(EXEEXT) \
 	extras/fstab_import/fstab_import$(EXEEXT) \
 	extras/scsi_id/scsi_id$(EXEEXT) extras/usb_id/usb_id$(EXEEXT) \
 	extras/v4l_id/v4l_id$(EXEEXT) $(am__EXEEXT_1)
+@ENABLE_GLIB_TRUE@am__append_3 = extras/gudev/docs
+@ENABLE_GLIB_TRUE@am__append_4 = extras/gudev/libgudev-1.0.la
+@ENABLE_GLIB_TRUE@am__append_5 = extras/gudev/gudev-1.0.pc
+@ENABLE_GLIB_TRUE@am__append_6 = $(dist_extras_gudev_libgudev_1_0_la_SOURCES)
+@ENABLE_GLIB_TRUE@am__append_7 = \
+@ENABLE_GLIB_TRUE@	extras/gudev/COPYING \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevmarshal.list \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumtypes.h.template \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumtypes.c.template
+
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@am__append_8 = $(gir_DATA) $(typelibs_DATA)
+@ENABLE_GLIB_TRUE@am__append_9 = libgudev-install-move-hook
+@ENABLE_GLIB_TRUE@am__append_10 = libgudev-uninstall-move-hook
 
 # ------------------------------------------------------------------------------
 # conditional extras (need glib, libusb, libacl, ...)
 # ------------------------------------------------------------------------------
-@ENABLE_EXTRAS_TRUE@am__append_3 =  \
+@ENABLE_EXTRAS_TRUE@am__append_11 =  \
 @ENABLE_EXTRAS_TRUE@	rules/rules.d/75-net-description.rules \
 @ENABLE_EXTRAS_TRUE@	rules/rules.d/75-tty-description.rules \
 @ENABLE_EXTRAS_TRUE@	rules/rules.d/78-sound-card.rules \
@@ -71,31 +84,22 @@ libexec_PROGRAMS = extras/firmware/firmware$(EXEEXT) \
 @ENABLE_EXTRAS_TRUE@	extras/mtd_probe/75-probe_mtd.rules \
 @ENABLE_EXTRAS_TRUE@	extras/keymap/95-keymap.rules \
 @ENABLE_EXTRAS_TRUE@	extras/keymap/95-keyboard-force-release.rules
-@ENABLE_EXTRAS_TRUE@am__append_4 = extras/gudev/docs
-@ENABLE_EXTRAS_TRUE@am__append_5 = extras/gudev/libgudev-1.0.la
-@ENABLE_EXTRAS_TRUE@am__append_6 = extras/gudev/gudev-1.0.pc
-@ENABLE_EXTRAS_TRUE@am__append_7 = extras/gudev/COPYING \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevmarshal.list \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumtypes.h.template \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumtypes.c.template \
-@ENABLE_EXTRAS_TRUE@	extras/keymap/check-keymaps.sh
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@am__append_8 = $(gir_DATA) $(typelibs_DATA)
-@ENABLE_EXTRAS_TRUE@am__append_9 = libgudev-install-move-hook \
-@ENABLE_EXTRAS_TRUE@	udevacl-install-hook
-@ENABLE_EXTRAS_TRUE@am__append_10 = libgudev-uninstall-move-hook
-@ENABLE_EXTRAS_TRUE@am__append_11 = extras/hid2hci/hid2hci \
+@ENABLE_EXTRAS_TRUE@am__append_12 = extras/hid2hci/hid2hci \
 @ENABLE_EXTRAS_TRUE@	extras/udev-acl/udev-acl \
 @ENABLE_EXTRAS_TRUE@	extras/usb-db/usb-db extras/usb-db/pci-db \
 @ENABLE_EXTRAS_TRUE@	extras/mobile-action-modeswitch/mobile-action-modeswitch \
 @ENABLE_EXTRAS_TRUE@	extras/mtd_probe/mtd_probe \
 @ENABLE_EXTRAS_TRUE@	extras/keymap/keymap
-@ENABLE_EXTRAS_TRUE@am__append_12 = extras/keymap/findkeyboards \
+@ENABLE_EXTRAS_TRUE@am__append_13 = udevacl-install-hook
+@ENABLE_EXTRAS_TRUE@am__append_14 = $(nodist_extras_keymap_keymap_SOURCES)
+@ENABLE_EXTRAS_TRUE@am__append_15 = extras/keymap/check-keymaps.sh
+@ENABLE_EXTRAS_TRUE@am__append_16 = extras/keymap/findkeyboards \
 @ENABLE_EXTRAS_TRUE@	extras/keymap/keyboard-force-release.sh
-@ENABLE_EXTRAS_TRUE@am__append_13 = \
+@ENABLE_EXTRAS_TRUE@am__append_17 = \
 @ENABLE_EXTRAS_TRUE@	extras/keymap/keys.txt \
 @ENABLE_EXTRAS_TRUE@	extras/keymap/keys-from-name.gperf
 
-@ENABLE_EXTRAS_TRUE@am__append_14 = keymaps-distcheck-hook
+@ENABLE_EXTRAS_TRUE@am__append_18 = keymaps-distcheck-hook
 subdir = .
 DIST_COMMON = README $(am__configure_deps) $(am__dist_doc_DATA_DIST) \
 	$(am__dist_libexec_SCRIPTS_DIST) \
@@ -162,8 +166,8 @@ am__installdirs = "$(DESTDIR)$(libdir)" "$(DESTDIR)$(libexecdir)" \
 	"$(DESTDIR)$(includedir)" "$(DESTDIR)$(libgudev_includedir)"
 LTLIBRARIES = $(lib_LTLIBRARIES) $(noinst_LTLIBRARIES)
 am__DEPENDENCIES_1 =
-@ENABLE_EXTRAS_TRUE@extras_gudev_libgudev_1_0_la_DEPENDENCIES =  \
-@ENABLE_EXTRAS_TRUE@	libudev/libudev.la $(am__DEPENDENCIES_1)
+@ENABLE_GLIB_TRUE@extras_gudev_libgudev_1_0_la_DEPENDENCIES =  \
+@ENABLE_GLIB_TRUE@	libudev/libudev.la $(am__DEPENDENCIES_1)
 am__extras_gudev_libgudev_1_0_la_SOURCES_DIST =  \
 	extras/gudev/gudevenums.h extras/gudev/gudevenumtypes.h \
 	extras/gudev/gudevtypes.h extras/gudev/gudevclient.h \
@@ -171,14 +175,14 @@ am__extras_gudev_libgudev_1_0_la_SOURCES_DIST =  \
 	extras/gudev/gudevdevice.c extras/gudev/gudevenumerator.h \
 	extras/gudev/gudevenumerator.c extras/gudev/gudevprivate.h
 am__dirstamp = $(am__leading_dot)dirstamp
-@ENABLE_EXTRAS_TRUE@am_extras_gudev_libgudev_1_0_la_OBJECTS = extras/gudev/extras_gudev_libgudev_1_0_la-gudevclient.lo \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/extras_gudev_libgudev_1_0_la-gudevdevice.lo \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/extras_gudev_libgudev_1_0_la-gudevenumerator.lo
+@ENABLE_GLIB_TRUE@am_extras_gudev_libgudev_1_0_la_OBJECTS = extras/gudev/extras_gudev_libgudev_1_0_la-gudevclient.lo \
+@ENABLE_GLIB_TRUE@	extras/gudev/extras_gudev_libgudev_1_0_la-gudevdevice.lo \
+@ENABLE_GLIB_TRUE@	extras/gudev/extras_gudev_libgudev_1_0_la-gudevenumerator.lo
 am__dist_extras_gudev_libgudev_1_0_la_SOURCES_DIST =  \
 	extras/gudev/gudevmarshal.h extras/gudev/gudevmarshal.c \
 	extras/gudev/gudevenumtypes.h extras/gudev/gudevenumtypes.c
-@ENABLE_EXTRAS_TRUE@dist_extras_gudev_libgudev_1_0_la_OBJECTS = extras/gudev/extras_gudev_libgudev_1_0_la-gudevmarshal.lo \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/extras_gudev_libgudev_1_0_la-gudevenumtypes.lo
+@ENABLE_GLIB_TRUE@dist_extras_gudev_libgudev_1_0_la_OBJECTS = extras/gudev/extras_gudev_libgudev_1_0_la-gudevmarshal.lo \
+@ENABLE_GLIB_TRUE@	extras/gudev/extras_gudev_libgudev_1_0_la-gudevenumtypes.lo
 extras_gudev_libgudev_1_0_la_OBJECTS =  \
 	$(am_extras_gudev_libgudev_1_0_la_OBJECTS) \
 	$(dist_extras_gudev_libgudev_1_0_la_OBJECTS)
@@ -189,8 +193,8 @@ extras_gudev_libgudev_1_0_la_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC \
 	$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \
 	$(extras_gudev_libgudev_1_0_la_CFLAGS) $(CFLAGS) \
 	$(extras_gudev_libgudev_1_0_la_LDFLAGS) $(LDFLAGS) -o $@
-@ENABLE_EXTRAS_TRUE@am_extras_gudev_libgudev_1_0_la_rpath = -rpath \
-@ENABLE_EXTRAS_TRUE@	$(libdir)
+@ENABLE_GLIB_TRUE@am_extras_gudev_libgudev_1_0_la_rpath = -rpath \
+@ENABLE_GLIB_TRUE@	$(libdir)
 @WITH_SELINUX_TRUE@libudev_libudev_private_la_DEPENDENCIES =  \
 @WITH_SELINUX_TRUE@	$(am__DEPENDENCIES_1)
 am__libudev_libudev_private_la_SOURCES_DIST =  \
@@ -717,10 +721,10 @@ target_alias = @target_alias@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
-SUBDIRS = . libudev/docs $(am__append_4)
+SUBDIRS = . libudev/docs $(am__append_3)
 EXTRA_DIST = autogen.sh libudev/exported_symbols libudev/COPYING \
 	rules/arch rules/misc udev/udev.xml udev/udevadm.xml \
-	udev/udevd.xml $(am__append_7) $(TESTS) \
+	udev/udevd.xml $(am__append_7) $(am__append_15) $(TESTS) \
 	test/rule-syntax-check.py
 ACLOCAL_AMFLAGS = -I m4
 AM_MAKEFLAGS = --no-print-directory
@@ -737,12 +741,13 @@ DISTCHECK_CONFIGURE_FLAGS = \
 	--enable-gtk-doc \
 	--with-systemdsystemunitdir=$$dc_install_base/$(systemdsystemunitdir)
 
-CLEANFILES = $(am__append_8) $(am__append_13) udev-$(VERSION).tar.gz \
+CLEANFILES = $(am__append_8) $(am__append_17) udev-$(VERSION).tar.gz \
 	udev-$(VERSION).tar.bz2 $(BUILT_SOURCES)
-INSTALL_EXEC_HOOKS = libudev-install-move-hook $(am__append_9)
+INSTALL_EXEC_HOOKS = libudev-install-move-hook $(am__append_9) \
+	$(am__append_13)
 INSTALL_DATA_HOOKS = udev-confdirs $(am__append_2)
 UNINSTALL_EXEC_HOOKS = libudev-uninstall-move-hook $(am__append_10)
-DISTCHECK_HOOKS = $(am__append_14)
+DISTCHECK_HOOKS = $(am__append_18)
 
 # ------------------------------------------------------------------------------
 # libudev
@@ -751,7 +756,7 @@ LIBUDEV_CURRENT = 10
 LIBUDEV_REVISION = 0
 LIBUDEV_AGE = 10
 include_HEADERS = libudev/libudev.h
-lib_LTLIBRARIES = libudev/libudev.la $(am__append_5)
+lib_LTLIBRARIES = libudev/libudev.la $(am__append_4)
 libudev_libudev_la_SOURCES = \
 	libudev/libudev-private.h \
 	libudev/libudev.c \
@@ -775,7 +780,7 @@ libudev_libudev_private_la_SOURCES = $(libudev_libudev_la_SOURCES) \
 	libudev/libudev-queue-private.c $(am__append_1)
 @WITH_SELINUX_TRUE@libudev_libudev_private_la_LIBADD = $(SELINUX_LIBS)
 pkgconfigdir = $(libdir)/pkgconfig
-pkgconfig_DATA = libudev/libudev.pc $(am__append_6)
+pkgconfig_DATA = libudev/libudev.pc $(am__append_5)
 udevrulesdir = $(libexecdir)/rules.d
 dist_udevrules_DATA = rules/rules.d/50-udev-default.rules \
 	rules/rules.d/60-persistent-storage.rules \
@@ -792,7 +797,7 @@ dist_udevrules_DATA = rules/rules.d/50-udev-default.rules \
 	extras/edd_id/61-persistent-storage-edd.rules \
 	extras/floppy/60-floppy.rules \
 	extras/fstab_import/79-fstab_import.rules \
-	extras/v4l_id/60-persistent-v4l.rules $(am__append_3)
+	extras/v4l_id/60-persistent-v4l.rules $(am__append_11)
 udevconfdir = $(sysconfdir)/udev
 dist_udevconf_DATA = udev.conf
 sharepkgconfigdir = $(datadir)/pkgconfig
@@ -850,7 +855,7 @@ udev_test_udev_LDADD = libudev/libudev-private.la
 # rule_generator - persistent network and optical device rule generator
 # ------------------------------------------------------------------------------
 dist_libexec_SCRIPTS = extras/rule_generator/write_cd_rules \
-	extras/rule_generator/write_net_rules $(am__append_12)
+	extras/rule_generator/write_net_rules $(am__append_16)
 udevhomedir = $(libexecdir)
 dist_udevhome_DATA = extras/rule_generator/rule_generator.functions
 
@@ -931,65 +936,64 @@ extras_usb_id_usb_id_LDADD = libudev/libudev-private.la
 # ------------------------------------------------------------------------------
 extras_v4l_id_v4l_id_SOURCES = extras/v4l_id/v4l_id.c
 extras_v4l_id_v4l_id_LDADD = libudev/libudev-private.la
+BUILT_SOURCES = $(am__append_6) $(am__append_14)
 
 # ------------------------------------------------------------------------------
 # GUdev - libudev gobject interface
 # ------------------------------------------------------------------------------
-@ENABLE_EXTRAS_TRUE@LIBGUDEV_CURRENT = 1
-@ENABLE_EXTRAS_TRUE@LIBGUDEV_REVISION = 0
-@ENABLE_EXTRAS_TRUE@LIBGUDEV_AGE = 1
-@ENABLE_EXTRAS_TRUE@libgudev_includedir = $(includedir)/gudev-1.0/gudev
-@ENABLE_EXTRAS_TRUE@libgudev_include_HEADERS = \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudev.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenums.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumtypes.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevtypes.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevclient.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevdevice.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumerator.h
-
-@ENABLE_EXTRAS_TRUE@extras_gudev_libgudev_1_0_la_SOURCES = \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenums.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumtypes.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumtypes.h\
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevtypes.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevclient.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevclient.c \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevdevice.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevdevice.c \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumerator.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumerator.c \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevprivate.h
-
-@ENABLE_EXTRAS_TRUE@dist_extras_gudev_libgudev_1_0_la_SOURCES = \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevmarshal.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevmarshal.c \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumtypes.h \
-@ENABLE_EXTRAS_TRUE@	extras/gudev/gudevenumtypes.c
-
-@ENABLE_EXTRAS_TRUE@BUILT_SOURCES = $(dist_extras_gudev_libgudev_1_0_la_SOURCES) \
-@ENABLE_EXTRAS_TRUE@	$(nodist_extras_keymap_keymap_SOURCES)
-@ENABLE_EXTRAS_TRUE@extras_gudev_libgudev_1_0_la_CPPFLAGS = \
-@ENABLE_EXTRAS_TRUE@	$(AM_CPPFLAGS) \
-@ENABLE_EXTRAS_TRUE@	-I$(top_builddir)/extras \
-@ENABLE_EXTRAS_TRUE@	-I$(top_srcdir)/extras \
-@ENABLE_EXTRAS_TRUE@	-I$(top_builddir)/extras/gudev \
-@ENABLE_EXTRAS_TRUE@	-I$(top_srcdir)/extras/gudev \
-@ENABLE_EXTRAS_TRUE@	-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT \
-@ENABLE_EXTRAS_TRUE@	-D_GUDEV_COMPILATION \
-@ENABLE_EXTRAS_TRUE@	-DG_LOG_DOMAIN=\"GUdev\"
-
-@ENABLE_EXTRAS_TRUE@extras_gudev_libgudev_1_0_la_CFLAGS = $(GLIB_CFLAGS)
-@ENABLE_EXTRAS_TRUE@extras_gudev_libgudev_1_0_la_LIBADD = libudev/libudev.la $(GLIB_LIBS)
-@ENABLE_EXTRAS_TRUE@extras_gudev_libgudev_1_0_la_LDFLAGS = \
-@ENABLE_EXTRAS_TRUE@	-version-info $(LIBGUDEV_CURRENT):$(LIBGUDEV_REVISION):$(LIBGUDEV_AGE) \
-@ENABLE_EXTRAS_TRUE@	-export-dynamic -no-undefined \
-@ENABLE_EXTRAS_TRUE@	-export-symbols-regex '^g_udev_.*'
-
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@girdir = $(GIRDIR)
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@gir_DATA = extras/gudev/GUdev-1.0.gir
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@typelibsdir = $(GIRTYPELIBDIR)
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@typelibs_DATA = extras/gudev/GUdev-1.0.typelib
+@ENABLE_GLIB_TRUE@LIBGUDEV_CURRENT = 1
+@ENABLE_GLIB_TRUE@LIBGUDEV_REVISION = 0
+@ENABLE_GLIB_TRUE@LIBGUDEV_AGE = 1
+@ENABLE_GLIB_TRUE@libgudev_includedir = $(includedir)/gudev-1.0/gudev
+@ENABLE_GLIB_TRUE@libgudev_include_HEADERS = \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudev.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenums.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumtypes.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevtypes.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevclient.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevdevice.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumerator.h
+
+@ENABLE_GLIB_TRUE@extras_gudev_libgudev_1_0_la_SOURCES = \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenums.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumtypes.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumtypes.h\
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevtypes.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevclient.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevclient.c \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevdevice.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevdevice.c \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumerator.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumerator.c \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevprivate.h
+
+@ENABLE_GLIB_TRUE@dist_extras_gudev_libgudev_1_0_la_SOURCES = \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevmarshal.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevmarshal.c \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumtypes.h \
+@ENABLE_GLIB_TRUE@	extras/gudev/gudevenumtypes.c
+
+@ENABLE_GLIB_TRUE@extras_gudev_libgudev_1_0_la_CPPFLAGS = \
+@ENABLE_GLIB_TRUE@	$(AM_CPPFLAGS) \
+@ENABLE_GLIB_TRUE@	-I$(top_builddir)/extras \
+@ENABLE_GLIB_TRUE@	-I$(top_srcdir)/extras \
+@ENABLE_GLIB_TRUE@	-I$(top_builddir)/extras/gudev \
+@ENABLE_GLIB_TRUE@	-I$(top_srcdir)/extras/gudev \
+@ENABLE_GLIB_TRUE@	-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT \
+@ENABLE_GLIB_TRUE@	-D_GUDEV_COMPILATION \
+@ENABLE_GLIB_TRUE@	-DG_LOG_DOMAIN=\"GUdev\"
+
+@ENABLE_GLIB_TRUE@extras_gudev_libgudev_1_0_la_CFLAGS = $(GLIB_CFLAGS)
+@ENABLE_GLIB_TRUE@extras_gudev_libgudev_1_0_la_LIBADD = libudev/libudev.la $(GLIB_LIBS)
+@ENABLE_GLIB_TRUE@extras_gudev_libgudev_1_0_la_LDFLAGS = \
+@ENABLE_GLIB_TRUE@	-version-info $(LIBGUDEV_CURRENT):$(LIBGUDEV_REVISION):$(LIBGUDEV_AGE) \
+@ENABLE_GLIB_TRUE@	-export-dynamic -no-undefined \
+@ENABLE_GLIB_TRUE@	-export-symbols-regex '^g_udev_.*'
+
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@girdir = $(GIRDIR)
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@gir_DATA = extras/gudev/GUdev-1.0.gir
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@typelibsdir = $(GIRTYPELIBDIR)
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@typelibs_DATA = extras/gudev/GUdev-1.0.typelib
 
 # ------------------------------------------------------------------------------
 # Bluetooth HID devices with special magic to switch the device
@@ -3103,63 +3107,63 @@ udev-confdirs:
 %.7 %.8 : %.xml
 	$(AM_V_GEN)$(XSLTPROC) -o $@ -nonet http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl $<
 
-@ENABLE_EXTRAS_TRUE@extras/gudev/gudevmarshal.h: extras/gudev/gudevmarshal.list
-@ENABLE_EXTRAS_TRUE@	$(AM_V_GEN)glib-genmarshal $< --prefix=g_udev_marshal --header > $@
-
-@ENABLE_EXTRAS_TRUE@extras/gudev/gudevmarshal.c: extras/gudev/gudevmarshal.list
-@ENABLE_EXTRAS_TRUE@	$(AM_V_GEN)echo "#include \"gudevmarshal.h\"" > $@ && \
-@ENABLE_EXTRAS_TRUE@	glib-genmarshal $< --prefix=g_udev_marshal --body >> $@
-
-@ENABLE_EXTRAS_TRUE@extras/gudev/gudevenumtypes.h: extras/gudev/gudevenumtypes.h.template extras/gudev/gudevenums.h
-@ENABLE_EXTRAS_TRUE@	$(AM_V_GEN)glib-mkenums --template $^ > \
-@ENABLE_EXTRAS_TRUE@	    $@.tmp && mv $@.tmp $@
-
-@ENABLE_EXTRAS_TRUE@extras/gudev/gudevenumtypes.c: extras/gudev/gudevenumtypes.c.template extras/gudev/gudevenums.h
-@ENABLE_EXTRAS_TRUE@	$(AM_V_GEN)glib-mkenums --template $^ > \
-@ENABLE_EXTRAS_TRUE@	    $@.tmp && mv $@.tmp $@
-
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@extras/gudev/GUdev-1.0.gir: extras/gudev/libgudev-1.0.la $(G_IR_SCANNER) Makefile.am
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@	$(AM_V_GEN)PKG_CONFIG_PATH=$(top_builddir)/data:$$PKG_CONFIG_PATH \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@	LD_LIBRARY_PATH=$(top_builddir)/extras/gudev:$$LD_LIBRARY_PATH \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@	$(G_IR_SCANNER) -v \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		--namespace GUdev \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		--nsversion=1.0 \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		--include=GObject-2.0 \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		--library=gudev-1.0 \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		--library-path=extras/gudev \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		--output $@ \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		--pkg=glib-2.0 \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		--pkg=gobject-2.0 \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		-I$(top_builddir)/extras \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		-I$(top_srcdir)/extras \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		-D_GUDEV_COMPILATION \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		-D_GUDEV_WORK_AROUND_DEV_T_BUG \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudev.h \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevtypes.h \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevenums.h \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(or $(wildcard $(top_builddir)/extras/gudev/gudevenumtypes.h),$(top_srcdir)/extras/gudev/gudevenumtypes.h) \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevclient.h \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevdevice.h \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevenumerator.h \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevclient.c \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevdevice.c \
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevenumerator.c
-
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@extras/gudev/GUdev-1.0.typelib: extras/gudev/GUdev-1.0.gir $(G_IR_COMPILER)
-@ENABLE_EXTRAS_TRUE@@ENABLE_INTROSPECTION_TRUE@	$(AM_V_GEN)g-ir-compiler $< -o $@
+@ENABLE_GLIB_TRUE@extras/gudev/gudevmarshal.h: extras/gudev/gudevmarshal.list
+@ENABLE_GLIB_TRUE@	$(AM_V_GEN)glib-genmarshal $< --prefix=g_udev_marshal --header > $@
+
+@ENABLE_GLIB_TRUE@extras/gudev/gudevmarshal.c: extras/gudev/gudevmarshal.list
+@ENABLE_GLIB_TRUE@	$(AM_V_GEN)echo "#include \"gudevmarshal.h\"" > $@ && \
+@ENABLE_GLIB_TRUE@	glib-genmarshal $< --prefix=g_udev_marshal --body >> $@
+
+@ENABLE_GLIB_TRUE@extras/gudev/gudevenumtypes.h: extras/gudev/gudevenumtypes.h.template extras/gudev/gudevenums.h
+@ENABLE_GLIB_TRUE@	$(AM_V_GEN)glib-mkenums --template $^ > \
+@ENABLE_GLIB_TRUE@	    $@.tmp && mv $@.tmp $@
+
+@ENABLE_GLIB_TRUE@extras/gudev/gudevenumtypes.c: extras/gudev/gudevenumtypes.c.template extras/gudev/gudevenums.h
+@ENABLE_GLIB_TRUE@	$(AM_V_GEN)glib-mkenums --template $^ > \
+@ENABLE_GLIB_TRUE@	    $@.tmp && mv $@.tmp $@
+
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@extras/gudev/GUdev-1.0.gir: extras/gudev/libgudev-1.0.la $(G_IR_SCANNER) Makefile.am
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@	$(AM_V_GEN)PKG_CONFIG_PATH=$(top_builddir)/data:$$PKG_CONFIG_PATH \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@	LD_LIBRARY_PATH=$(top_builddir)/extras/gudev:$$LD_LIBRARY_PATH \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@	$(G_IR_SCANNER) -v \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		--namespace GUdev \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		--nsversion=1.0 \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		--include=GObject-2.0 \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		--library=gudev-1.0 \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		--library-path=extras/gudev \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		--output $@ \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		--pkg=glib-2.0 \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		--pkg=gobject-2.0 \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		-I$(top_builddir)/extras \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		-I$(top_srcdir)/extras \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		-D_GUDEV_COMPILATION \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		-D_GUDEV_WORK_AROUND_DEV_T_BUG \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudev.h \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevtypes.h \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevenums.h \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(or $(wildcard $(top_builddir)/extras/gudev/gudevenumtypes.h),$(top_srcdir)/extras/gudev/gudevenumtypes.h) \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevclient.h \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevdevice.h \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevenumerator.h \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevclient.c \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevdevice.c \
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@		$(top_srcdir)/extras/gudev/gudevenumerator.c
+
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@extras/gudev/GUdev-1.0.typelib: extras/gudev/GUdev-1.0.gir $(G_IR_COMPILER)
+@ENABLE_GLIB_TRUE@@ENABLE_INTROSPECTION_TRUE@	$(AM_V_GEN)g-ir-compiler $< -o $@
 
 # move lib from $(libdir) to $(rootlib_execdir) and update devel link, if needed
-@ENABLE_EXTRAS_TRUE@libgudev-install-move-hook:
-@ENABLE_EXTRAS_TRUE@	if test "$(libdir)" != "$(rootlib_execdir)"; then \
-@ENABLE_EXTRAS_TRUE@		mkdir -p $(DESTDIR)$(rootlib_execdir) && \
-@ENABLE_EXTRAS_TRUE@		so_img_name=$$(readlink $(DESTDIR)$(libdir)/libgudev-1.0.so) && \
-@ENABLE_EXTRAS_TRUE@		so_img_rel_target_prefix=$$(echo $(libdir) | sed 's,\(^/\|\)[^/][^/]*,..,g') && \
-@ENABLE_EXTRAS_TRUE@		ln -sf $$so_img_rel_target_prefix$(rootlib_execdir)/$$so_img_name $(DESTDIR)$(libdir)/libgudev-1.0.so && \
-@ENABLE_EXTRAS_TRUE@		mv $(DESTDIR)$(libdir)/libgudev-1.0.so.* $(DESTDIR)$(rootlib_execdir); \
-@ENABLE_EXTRAS_TRUE@	fi
-
-@ENABLE_EXTRAS_TRUE@libgudev-uninstall-move-hook:
-@ENABLE_EXTRAS_TRUE@	rm -f $(DESTDIR)$(rootlib_execdir)/libgudev-1.0.so*
+@ENABLE_GLIB_TRUE@libgudev-install-move-hook:
+@ENABLE_GLIB_TRUE@	if test "$(libdir)" != "$(rootlib_execdir)"; then \
+@ENABLE_GLIB_TRUE@		mkdir -p $(DESTDIR)$(rootlib_execdir) && \
+@ENABLE_GLIB_TRUE@		so_img_name=$$(readlink $(DESTDIR)$(libdir)/libgudev-1.0.so) && \
+@ENABLE_GLIB_TRUE@		so_img_rel_target_prefix=$$(echo $(libdir) | sed 's,\(^/\|\)[^/][^/]*,..,g') && \
+@ENABLE_GLIB_TRUE@		ln -sf $$so_img_rel_target_prefix$(rootlib_execdir)/$$so_img_name $(DESTDIR)$(libdir)/libgudev-1.0.so && \
+@ENABLE_GLIB_TRUE@		mv $(DESTDIR)$(libdir)/libgudev-1.0.so.* $(DESTDIR)$(rootlib_execdir); \
+@ENABLE_GLIB_TRUE@	fi
+
+@ENABLE_GLIB_TRUE@libgudev-uninstall-move-hook:
+@ENABLE_GLIB_TRUE@	rm -f $(DESTDIR)$(rootlib_execdir)/libgudev-1.0.so*
 
 @ENABLE_EXTRAS_TRUE@udevacl-install-hook:
 @ENABLE_EXTRAS_TRUE@	mkdir -p $(DESTDIR)$(prefix)/lib/ConsoleKit/run-seat.d
diff --git a/configure b/configure
index 1716e69..8b9be40 100755
--- a/configure
+++ b/configure
@@ -765,9 +765,11 @@ USBUTILS_LIBS
 USBUTILS_CFLAGS
 LIBUSB_LIBS
 LIBUSB_CFLAGS
+GPERF
+ENABLE_GLIB_FALSE
+ENABLE_GLIB_TRUE
 GLIB_LIBS
 GLIB_CFLAGS
-GPERF
 WITH_SYSTEMD_FALSE
 WITH_SYSTEMD_TRUE
 systemdsystemunitdir
@@ -923,6 +925,7 @@ enable_debug
 enable_logging
 with_firmware_path
 with_systemdsystemunitdir
+enable_glib
 enable_extras
 with_pci_ids_path
 enable_introspection
@@ -1582,6 +1585,7 @@ Optional Features:
   --enable-gtk-doc-pdf    build documentation in pdf format [[default=no]]
   --enable-debug          enable debug messages
   --disable-logging       disable system logging
+  --disable-glib          disable GLIB dependencies
   --disable-extras        disable extras with external dependencies
   --disable-introspection disable GObject introspection
 
@@ -1856,7 +1860,7 @@ $as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >
 $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
 ( $as_echo "## -------------------------------------------- ##
 ## Report this to linux-hotplug@vger.kernel.org ##
-## -------------------------------------------- ##"[]
+## -------------------------------------------- ##"
      ) | sed "s/^/$as_me: WARNING:     /" >&2
     ;;
 esac
@@ -2177,7 +2181,7 @@ trap 'exit_status=$?
 
     $as_echo "## ---------------- ##
 ## Cache variables. ##
-## ---------------- ##"[]
+## ---------------- ##"
     echo
     # The following way of writing the cache mishandles newlines in values,
 (
@@ -2213,7 +2217,7 @@ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
 
     $as_echo "## ----------------- ##
 ## Output variables. ##
-## ----------------- ##"[]
+## ----------------- ##"
     echo
     for ac_var in $ac_subst_vars
     do
@@ -2228,7 +2232,7 @@ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
     if test -n "$ac_subst_files"; then
       $as_echo "## ------------------- ##
 ## File substitutions. ##
-## ------------------- ##"[]
+## ------------------- ##"
       echo
       for ac_var in $ac_subst_files
       do
@@ -2244,7 +2248,7 @@ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
     if test -s confdefs.h; then
       $as_echo "## ----------- ##
 ## confdefs.h. ##
-## ----------- ##"[]
+## ----------- ##"
       echo
       cat confdefs.h
       echo
@@ -2323,7 +2327,7 @@ $as_echo "$as_me: loading site script $ac_site_file" >&6;}
       || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "failed to load site script $ac_site_file
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
   fi
 done
 
@@ -2548,11 +2552,11 @@ am_lf='
 '
 case `pwd` in
   *[\\\"\#\$\&\'\`$am_lf]*)
-    as_fn_error $? "unsafe absolute working directory name" "$LINENO" 5;;
+    as_fn_error $? "unsafe absolute working directory name" "$LINENO" 5 ;;
 esac
 case $srcdir in
   *[\\\"\#\$\&\'\`$am_lf\ \	]*)
-    as_fn_error $? "unsafe srcdir value: \`$srcdir'" "$LINENO" 5;;
+    as_fn_error $? "unsafe srcdir value: \`$srcdir'" "$LINENO" 5 ;;
 esac
 
 # Do `set' in a subshell so we don't clobber the current shell's
@@ -3326,7 +3330,7 @@ fi
 test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "no acceptable C compiler found in \$PATH
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 
 # Provide some information about the compiler.
 $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
@@ -3441,7 +3445,7 @@ sed 's/^/| /' conftest.$ac_ext >&5
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error 77 "C compiler cannot create executables
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
@@ -3484,7 +3488,7 @@ else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 fi
 rm -f conftest conftest$ac_cv_exeext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
@@ -3543,7 +3547,7 @@ $as_echo "$ac_try_echo"; } >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "cannot run C compiled programs.
 If you meant to cross compile, use \`--host'.
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
     fi
   fi
 fi
@@ -3595,7 +3599,7 @@ sed 's/^/| /' conftest.$ac_ext >&5
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "cannot compute suffix of object files: cannot compile
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 fi
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
@@ -4071,7 +4075,7 @@ else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 fi
 
 ac_ext=c
@@ -4647,7 +4651,7 @@ fi
 $as_echo "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
-*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5 ;;
 esac
 build=$ac_cv_build
 ac_save_IFS=$IFS; IFS='-'
@@ -4680,7 +4684,7 @@ fi
 $as_echo "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
-*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5 ;;
 esac
 host=$ac_cv_host
 ac_save_IFS=$IFS; IFS='-'
@@ -5150,13 +5154,13 @@ if test "${lt_cv_nm_interface+set}" = set; then :
 else
   lt_cv_nm_interface="BSD nm"
   echo "int some_variable = 0;" > conftest.$ac_ext
-  (eval echo "\"\$as_me:5153: $ac_compile\"" >&5)
+  (eval echo "\"\$as_me:5157: $ac_compile\"" >&5)
   (eval "$ac_compile" 2>conftest.err)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:5156: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
+  (eval echo "\"\$as_me:5160: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:5159: output\"" >&5)
+  (eval echo "\"\$as_me:5163: output\"" >&5)
   cat conftest.out >&5
   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
     lt_cv_nm_interface="MS dumpbin"
@@ -6361,7 +6365,7 @@ ia64-*-hpux*)
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 6364 "configure"' > conftest.$ac_ext
+  echo '#line 6368 "configure"' > conftest.$ac_ext
   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -7593,11 +7597,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7596: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7600: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:7600: \$? = $ac_status" >&5
+   echo "$as_me:7604: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -7932,11 +7936,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7935: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7939: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:7939: \$? = $ac_status" >&5
+   echo "$as_me:7943: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -8037,11 +8041,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8040: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8044: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:8044: \$? = $ac_status" >&5
+   echo "$as_me:8048: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -8092,11 +8096,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8095: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8099: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:8099: \$? = $ac_status" >&5
+   echo "$as_me:8103: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -10459,7 +10463,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10462 "configure"
+#line 10466 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -10555,7 +10559,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10558 "configure"
+#line 10562 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -11424,58 +11428,14 @@ else
 fi
 
 
-# Check whether --enable-extras was given.
-if test "${enable_extras+set}" = set; then :
-  enableval=$enable_extras;
+# Check whether --enable-glib was given.
+if test "${enable_glib+set}" = set; then :
+  enableval=$enable_glib;
 else
-  enable_extras=yes
+  enable_glib=yes
 fi
 
-if test "x$enable_extras" = xyes; then
-	# Extract the first word of "gperf", so it can be a program name with args.
-set dummy gperf; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_GPERF+set}" = set; then :
-  $as_echo_n "(cached) " >&6
-else
-  case $GPERF in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_GPERF="$GPERF" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_exec_ext in '' $ac_executable_extensions; do
-  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-    ac_cv_path_GPERF="$as_dir/$ac_word$ac_exec_ext"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-  done
-IFS=$as_save_IFS
-
-  ;;
-esac
-fi
-GPERF=$ac_cv_path_GPERF
-if test -n "$GPERF"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GPERF" >&5
-$as_echo "$GPERF" >&6; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-fi
-
-
-	if test -z "$GPERF"; then
-		as_fn_error $? "gperf is needed" "$LINENO" 5
-	fi
-
+if test "x$enable_glib" = xyes; then
 
 pkg_failed=no
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GLIB" >&5
@@ -11557,7 +11517,7 @@ and GLIB_LIBS to avoid the need to call pkg-config.
 See the pkg-config man page for more details.
 
 To get pkg-config, see <http://pkg-config.freedesktop.org/>.
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
 	GLIB_CFLAGS=$pkg_cv_GLIB_CFLAGS
 	GLIB_LIBS=$pkg_cv_GLIB_LIBS
@@ -11567,6 +11527,67 @@ $as_echo "yes" >&6; }
 fi
 
 
+fi
+ if test "x$enable_glib" = xyes; then
+  ENABLE_GLIB_TRUE=
+  ENABLE_GLIB_FALSE='#'
+else
+  ENABLE_GLIB_TRUE='#'
+  ENABLE_GLIB_FALSE=
+fi
+
+
+# Check whether --enable-extras was given.
+if test "${enable_extras+set}" = set; then :
+  enableval=$enable_extras;
+else
+  enable_extras=yes
+fi
+
+if test "x$enable_extras" = xyes; then
+	# Extract the first word of "gperf", so it can be a program name with args.
+set dummy gperf; ac_word=$2
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+$as_echo_n "checking for $ac_word... " >&6; }
+if test "${ac_cv_path_GPERF+set}" = set; then :
+  $as_echo_n "(cached) " >&6
+else
+  case $GPERF in
+  [\\/]* | ?:[\\/]*)
+  ac_cv_path_GPERF="$GPERF" # Let the user override the test with a path.
+  ;;
+  *)
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+    ac_cv_path_GPERF="$as_dir/$ac_word$ac_exec_ext"
+    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+  ;;
+esac
+fi
+GPERF=$ac_cv_path_GPERF
+if test -n "$GPERF"; then
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GPERF" >&5
+$as_echo "$GPERF" >&6; }
+else
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+fi
+
+
+	if test -z "$GPERF"; then
+		as_fn_error $? "gperf is needed" "$LINENO" 5
+	fi
 
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for acl_init in -lacl" >&5
 $as_echo_n "checking for acl_init in -lacl... " >&6; }
@@ -11700,7 +11721,7 @@ and LIBUSB_LIBS to avoid the need to call pkg-config.
 See the pkg-config man page for more details.
 
 To get pkg-config, see <http://pkg-config.freedesktop.org/>.
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
 	LIBUSB_CFLAGS=$pkg_cv_LIBUSB_CFLAGS
 	LIBUSB_LIBS=$pkg_cv_LIBUSB_LIBS
@@ -11792,7 +11813,7 @@ and USBUTILS_LIBS to avoid the need to call pkg-config.
 See the pkg-config man page for more details.
 
 To get pkg-config, see <http://pkg-config.freedesktop.org/>.
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
 	USBUTILS_CFLAGS=$pkg_cv_USBUTILS_CFLAGS
 	USBUTILS_LIBS=$pkg_cv_USBUTILS_LIBS
@@ -12001,7 +12022,7 @@ and INTROSPECTION_LIBS to avoid the need to call pkg-config.
 See the pkg-config man page for more details.
 
 To get pkg-config, see <http://pkg-config.freedesktop.org/>.
-See \`config.log' for more details" "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
 	INTROSPECTION_CFLAGS=$pkg_cv_INTROSPECTION_CFLAGS
 	INTROSPECTION_LIBS=$pkg_cv_INTROSPECTION_LIBS
@@ -12179,6 +12200,10 @@ if test -z "${WITH_SYSTEMD_TRUE}" && test -z "${WITH_SYSTEMD_FALSE}"; then
   as_fn_error $? "conditional \"WITH_SYSTEMD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
+if test -z "${ENABLE_GLIB_TRUE}" && test -z "${ENABLE_GLIB_FALSE}"; then
+  as_fn_error $? "conditional \"ENABLE_GLIB\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
 if test -z "${ENABLE_EXTRAS_TRUE}" && test -z "${ENABLE_EXTRAS_FALSE}"; then
   as_fn_error $? "conditional \"ENABLE_EXTRAS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
@@ -13060,7 +13085,7 @@ do
     "extras/gudev/docs/Makefile") CONFIG_FILES="$CONFIG_FILES extras/gudev/docs/Makefile" ;;
     "extras/gudev/docs/version.xml") CONFIG_FILES="$CONFIG_FILES extras/gudev/docs/version.xml" ;;
 
-  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
+  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5 ;;
   esac
 done
 
@@ -13376,7 +13401,7 @@ do
   esac
   case $ac_mode$ac_tag in
   :[FHL]*:*);;
-  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
+  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5 ;;
   :[FH]-) ac_tag=-:-;;
   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
   esac
@@ -13404,7 +13429,7 @@ do
 	   [\\/$]*) false;;
 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
 	   esac ||
-	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
+	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5 ;;
       esac
       case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
       as_fn_append ac_file_inputs " '$ac_f'"
@@ -13431,7 +13456,7 @@ $as_echo "$as_me: creating $ac_file" >&6;}
 
     case $ac_tag in
     *:-:* | *:-) cat >"$tmp/stdin" \
-      || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5  ;;
     esac
     ;;
   esac
