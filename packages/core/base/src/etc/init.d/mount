#!/bin/sh

# read tmpfs defaults
if [ -f /etc/default/tmpfs ]; then
	. /etc/default/tmpfs
else
	TMPFS_SIZE=2M
	TMPFS_MODE=0755

	LOCK_SIZE=2M
	LOCK_MODE=1777

	RUN_SIZE=2M
	RUN_MODE=0755
fi

# mount devpts filesystem
if [ -f /etc/default/devpts ]; then
	. /etc/default/devpts
else
	TTYGROUP=5
	TTYMODE=620
fi

if [ ! -d /dev/pts ]; then
	mkdir -p /dev/pts
fi

/bin/mount -n -t devpts -o noexec,nosuid,gid=$TTYGROUP,mode=$TTYMODE devpts /dev/pts

# mount /tmp filesystem
if [ ! -d /tmp ]; then
	mkdir /tmp
fi

/bin/mount -n -t tmpfs -o size=$TMPFS_SIZE,mode=$TMPFS_MODE,nosuid tmpfs /tmp

# mount /var/lock filesystem
if [ ! -d /var/lock ]; then
	mkdir -p /var/lock
fi

/bin/mount -n -t tmpfs -o size=$LOCK_SIZE,mode=$LOCK_MODE,nosuid tmpfs /var/lock

# mount /var/run filesystem
if [ ! -d /var/run ]; then
	mkdir -p /var/run
fi

/bin/mount -n -t tmpfs -o size=$RUN_SIZE,mode=$RUN_MODE,nodev,noexec,nosuid tmpfs /var/run

# vim: tw=0

