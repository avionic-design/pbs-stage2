--- a/names.c	2007-04-23 16:04:28.000000000 +0200
+++ b/names.c	2007-04-23 16:06:42.000000000 +0200
@@ -41,6 +41,16 @@
 #include "names.h"
 
 
+#if malloc == rpl_malloc
+void *rpl_malloc(size_t size)
+{
+	if (size == 0)
+		size = 1;
+
+	return malloc(size);
+}
+#endif
+
 /* ---------------------------------------------------------------------- */
 
 struct vendor {
