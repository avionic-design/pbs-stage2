diff --git a/configure.ac b/configure.ac
index 24fcc9e..2a84ed1 100644
--- a/configure.ac
+++ b/configure.ac
@@ -906,10 +906,7 @@ PKG_PROG_PKG_CONFIG
 
 #### Sort out XML library
 
-# see what we have
-AC_CHECK_LIB(expat, XML_ParserCreate_MM,
-             [ AC_CHECK_HEADERS(expat.h, have_expat=true, have_expat=false) ],
-             have_expat=false)
+PKG_CHECK_MODULES(EXPAT, expat, have_expat=true, have_expat=false)
 
 # see what we want to use
 dbus_use_libxml=false
@@ -930,7 +927,7 @@ else
         ### our brutal OOM-handling unit test setup.
         ### http://bugzilla.gnome.org/show_bug.cgi?id=109368
         if test x$have_expat = xfalse; then
-                AC_MSG_ERROR([Could not find expat.h, check config.log for failed attempts])
+                AC_MSG_ERROR([Could not find expat, check config.log for failed attempts])
         fi
 	### By default, only use Expat since it's tested and known to work.  If you're a
 	### general-purpose OS vendor, please don't enable libxml.  For embedded use
@@ -942,8 +939,8 @@ AM_CONDITIONAL(DBUS_USE_EXPAT, $dbus_use_expat)
 AM_CONDITIONAL(DBUS_USE_LIBXML, $dbus_use_libxml)
 
 if $dbus_use_expat; then
-   XML_LIBS=-lexpat
-   XML_CFLAGS=
+   XML_LIBS=$EXPAT_LIBS
+   XML_CFLAGS=$EXPAT_CFLAGS
 fi
 if $dbus_use_libxml; then
    XML_LIBS=$LIBXML_LIBS
