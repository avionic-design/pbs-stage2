Fix out-of-tree build.

From: Thierry Reding <thierry.reding@avionic-design.de>


---
 Makefile.in |    7 +++----
 configure   |    2 +-
 talloc.mk   |    4 +---
 3 files changed, 5 insertions(+), 8 deletions(-)

diff --git a/Makefile.in b/Makefile.in
index 94f031a..56ffdc9 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -22,8 +22,7 @@ TALLOC_VERSION_MINOR = @TALLOC_VERSION_MINOR@
 TALLOC_VERSION_RELEASE = @TALLOC_VERSION_RELEASE@
 SHLIBEXT = @SHLIBEXT@
 SHLD = @SHLD@
-SHLD_FLAGS = @SHLD_FLAGS@
-tallocdir = @tallocdir@
+SHLD_FLAGS = @SHLD_FLAGS@ @LDFLAGS@
 
 LIBOBJ = $(TALLOC_OBJ) @LIBREPLACEOBJ@
 
@@ -33,8 +32,8 @@ EXPORTSFILE = @EXPORTSFILE@
 
 all:: showflags $(EXTRA_TARGETS)
 
-include $(tallocdir)/rules.mk
-include $(tallocdir)/talloc.mk
+include $(srcdir)/rules.mk
+include $(srcdir)/talloc.mk
 
 @TALLOC_COMPAT1_MK@
 
diff --git a/configure b/configure
index c038976..75112b0 100755
--- a/configure
+++ b/configure
@@ -22228,7 +22228,7 @@ $as_echo "$as_me: error: sizeof(size_t) < sizeof(void *)" >&2;}
 fi
 
 if test x"$VERSIONSCRIPT" != "x"; then
-    EXPORTSFILE=talloc.exports
+    EXPORTSFILE=$srcdir/talloc.exports
 
 fi
 
diff --git a/talloc.mk b/talloc.mk
index a563d61..cb97481 100644
--- a/talloc.mk
+++ b/talloc.mk
@@ -1,4 +1,4 @@
-TALLOC_OBJ = $(tallocdir)/talloc.o 
+TALLOC_OBJ = talloc.o 
 
 TALLOC_SOLIB = libtalloc.$(SHLIBEXT).$(TALLOC_VERSION)
 TALLOC_SONAME = libtalloc.$(SHLIBEXT).$(TALLOC_VERSION_MAJOR)
@@ -23,8 +23,6 @@ install:: all
 	${INSTALLCMD} -m 644 talloc.pc $(DESTDIR)$(libdir)/pkgconfig
 	if [ -f talloc.3 ];then ${INSTALLCMD} -d $(DESTDIR)$(mandir)/man3; fi
 	if [ -f talloc.3 ];then ${INSTALLCMD} -m 644 talloc.3 $(DESTDIR)$(mandir)/man3; fi
-	which swig >/dev/null 2>&1 && ${INSTALLCMD} -d $(DESTDIR)`swig -swiglib` || true
-	which swig >/dev/null 2>&1 && ${INSTALLCMD} -m 644 talloc.i $(DESTDIR)`swig -swiglib` || true
 
 doc:: talloc.3 talloc.3.html
 
