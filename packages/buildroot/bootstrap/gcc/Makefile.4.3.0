# build instructions for final GCC 4.3.0

ifneq ($(HOST), $(TARGET))
  conf-args += \
	--target=$(TARGET)
endif

conf-args += \
	--program-prefix=$(TARGET)- \
	--disable-libmudflap \
	--disable-libssp \
	--disable-static \
	--enable-shared \
	--enable-symvers=gnu \
	--enable-languages=c,c++

ifeq ($(variant),sysroot)
  conf-args += \
	--with-local-prefix=$(ROOTFS) \
	--with-build-sysroot=$(ROOTFS) \
	--with-sysroot=$(ROOTFS) \
	--with-as=$(ROOTFS)$(prefix)/bin/$(TARGET)-as \
	--with-ld=$(ROOTFS)$(prefix)/bin/$(TARGET)-ld
else
  conf-args += \
	--includedir=$(ROOTFS)$(prefix)/$(TARGET)/include \
	--libexecdir=$(ROOTFS)$(prefix)/lib
endif


ifeq ($(FLOAT),soft)
  conf-args += --with-float=soft
endif

ifeq ($(MULTILIB),y)
  conf-args += --enable-multilib
else
  conf-args += --disable-multilib
endif

package-post-install: CC=$(ROOTFS)$(prefix)/bin/$(TARGET)-gcc
package-post-install:
	ln -sf ../include-fixed/limits.h \
		`$(CC) -print-file-name=include`/limits.h

